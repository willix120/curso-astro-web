---
import type { GetStaticPaths } from "astro";
import { getSpacexLaunches, getSpacexLaunchById } from '../../services/spacex';
import Layout from '../../layouts/Layout.astro';
import CardLaunch from "../../components/CardLaunch.astro";

const { id } = Astro.params;
const { name, links, details, success } = await getSpacexLaunchById(id);

export const getStaticPaths = ( async () => {
    const res = await getSpacexLaunches();

    return res.map((launch)=>({params: {id: launch.id}}));
}) satisfies GetStaticPaths;
---

<Layout title="Detalles de Lanzamiento">
    <CardLaunch 
        title={name} 
        patch={links.patch.small} 
        details={details} 
        success={success}
    />
</Layout>